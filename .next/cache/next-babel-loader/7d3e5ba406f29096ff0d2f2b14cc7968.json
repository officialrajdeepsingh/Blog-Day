{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar __jsx = React.createElement;\nimport React, { Fragment } from 'react';\nimport ReactMde from \"react-mde\";\nimport * as Showdown from \"showdown\";\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport Button from '@material-ui/core/Button';\nimport style from '../css/CommentEditor.module.scss';\nimport { request } from 'graphql-request';\nimport { COMMENT_MUTATION } from \"../graphalQurey\";\n\nvar signUP = function signUP(input) {\n  return request('https://www.rajdeepsingh.dev/graphql', COMMENT_MUTATION, input);\n};\n\nfunction Alert(props) {\n  return __jsx(MuiAlert, _extends({\n    elevation: 6,\n    variant: \"filled\"\n  }, props), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: props.show\n    }\n  }));\n}\n\nexport default function CommentEditor(props) {\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      value = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"write\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      selectedTab = _React$useState4[0],\n      setSelectedTab = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      open = _React$useState6[0],\n      setOpen = _React$useState6[1];\n\n  var _React$useState7 = React.useState({}),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      comment = _React$useState8[0],\n      setComment = _React$useState8[1];\n\n  var _React$useState9 = React.useState({}),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      getDisplayName = _React$useState10[0],\n      setGetDisplayName = _React$useState10[1];\n\n  var _React$useState11 = React.useState({}),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      getUserId = _React$useState12[0],\n      setgetUserId = _React$useState12[1];\n\n  var converter = new Showdown.Converter({\n    tables: true,\n    simplifiedAutoLink: true,\n    strikethrough: true,\n    tasklists: true\n  });\n\n  var submitComment = function submitComment(e) {\n    var UserId, DisplayName;\n    return _regeneratorRuntime.async(function submitComment$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            UserId = localStorage.getItem(\"userId\");\n            DisplayName = localStorage.getItem(\"displayName\");\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(signUP({\n              \"input\": {\n                \"content\": value,\n                \"author\": DisplayName,\n                \"userId\": UserId,\n                \"clientMutationId\": \"createComment\",\n                \"commentOn\": props.postid\n              }\n            }).then(function (data) {\n              setComment(function () {\n                return {\n                  data: data\n                };\n              });\n            })[\"catch\"](function (error) {\n              return setComment(function () {\n                return {\n                  error: error\n                };\n              });\n            }));\n\n          case 5:\n            setOpen(function () {\n              return true;\n            });\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  console.log(comment, ' comment ');\n  var ShowAlertError = comment.error ? comment.error.response.errors[0].message : 'submit';\n  return __jsx(Fragment, {\n    key: props.keyId\n  }, __jsx(ReactMde, {\n    value: value,\n    onChange: setValue,\n    selectedTab: selectedTab,\n    onTabChange: setSelectedTab,\n    generateMarkdownPreview: function generateMarkdownPreview(markdown) {\n      return Promise.resolve(converter.makeHtml(markdown));\n    },\n    childProps: {\n      writeButton: {\n        tabIndex: -1\n      }\n    }\n  }), __jsx(\"form\", {\n    onSubmit: submitComment\n  }, __jsx(Button, {\n    type: \"submit\",\n    className: style.productButton,\n    size: \"small\"\n  }, \"Submit\")), __jsx(Snackbar, {\n    open: open,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    autoHideDuration: 6000,\n    onClose: handleClose\n  }, __jsx(Alert, {\n    onClose: handleClose,\n    show: ShowAlertError,\n    severity: comment.error ? \"error\" : 'success'\n  })));\n}","map":null,"metadata":{},"sourceType":"module"}