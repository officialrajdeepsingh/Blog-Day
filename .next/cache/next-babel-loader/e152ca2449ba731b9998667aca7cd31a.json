{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport IconButton from '@material-ui/core/IconButton';\nimport Input from '@material-ui/core/Input';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport FilledInput from '@material-ui/core/FilledInput';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Link from 'next/link';\nimport gql from 'graphql-tag';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport { useRouter } from 'next/router';\nimport { NextSeo } from 'next-seo';\nimport style from '../Component/css/Login.module.scss'; // with SWR and graphql-request\n\nimport { request } from 'graphql-request';\nimport loginImage from '../Component/asset/loginImage.png';\nimport { LOGIN_MUTATION } from \"../Component/graphalQurey\";\n\nvar signIN = function signIN(userData) {\n  return request('https://www.rajdeepsingh.dev/graphql', LOGIN_MUTATION, userData);\n};\n\nfunction Alert(props) {\n  return __jsx(MuiAlert, _extends({\n    elevation: 6,\n    variant: \"filled\"\n  }, props), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: props.show\n    }\n  }));\n}\n\nexport default function Login(props) {\n  var router = useRouter(); // signIN\n\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      passward = _React$useState2[0],\n      setPassward = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      open = _React$useState4[0],\n      setOpen = _React$useState4[1];\n\n  var _React$useState5 = React.useState(\"\"),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      userName = _React$useState6[0],\n      setUserName = _React$useState6[1];\n\n  var _React$useState7 = React.useState({}),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      authdata = _React$useState8[0],\n      setAuthToken = _React$useState8[1];\n\n  var _React$useState9 = React.useState(false),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      showPassword = _React$useState10[0],\n      setShowPassword = _React$useState10[1];\n\n  var formSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _context.next = 3;\n              return signIN({\n                \"username\": userName,\n                \"password\": passward\n              }).then(function (data) {\n                setAuthToken(function () {\n                  return {\n                    data: data\n                  };\n                });\n                localStorage.setItem(\"authToken\", data.login.authToken);\n                localStorage.setItem(\"userId\", data.login.user.userId);\n                localStorage.setItem(\"displayName\", data.login.user.username);\n              })[\"catch\"](function (error) {\n                setAuthToken(function () {\n                  return {\n                    error: error\n                  };\n                });\n              });\n\n            case 3:\n              data = _context.sent;\n              setOpen(function () {\n                return true;\n              });\n\n              if (!data === \"undefined\") {\n                router.push(\"/\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function formSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var passwardChange = function passwardChange(event) {\n    setPassward(event.target.value);\n  };\n\n  var userNameChange = function userNameChange(event) {\n    setUserName(event.target.value);\n  };\n\n  var handleClickShowPassword = function handleClickShowPassword() {\n    setShowPassword(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var ShowAlertError = authdata.error ? authdata.error.response.errors[0].message : 'submit';\n  return __jsx(React.Fragment, null, __jsx(NextSeo, {\n    title: \"Login -- Welcome Back \",\n    description: \"Login  page \"\n  }), __jsx(Container, {\n    className: style.containerBox\n  }, __jsx(Card, {\n    className: style.root\n  }, __jsx(\"div\", {\n    className: style.innerCard\n  }, __jsx(\"div\", {\n    className: style.details\n  }, __jsx(CardContent, {\n    className: style.cardContentInner\n  }, __jsx(Typography, {\n    className: style.typeH5,\n    component: \"h6\",\n    variant: \"h6\"\n  }, \"Welcome Back!\"), __jsx(Typography, {\n    className: style.typeH3,\n    component: \"h3\",\n    variant: \"h2\"\n  }, \"Join With Me\"), __jsx(\"form\", {\n    onSubmit: formSubmit,\n    className: style.form,\n    noValidate: true,\n    autoComplete: \"on\"\n  }, __jsx(React.Fragment, null, __jsx(TextField, {\n    onChange: userNameChange,\n    autoComplete: \"username\",\n    id: \"userField\",\n    className: style.textControl,\n    placeholder: \"Enter Your Email Or User Name   \",\n    label: \" Email Or User Name \"\n  }), __jsx(FormControl, {\n    className: style.textControl\n  }, __jsx(InputLabel, {\n    htmlFor: \"LoginPassword\"\n  }, \"Password\"), __jsx(Input, {\n    id: \"LoginPassword\",\n    type: showPassword ? 'text' : 'password',\n    value: passward,\n    onChange: passwardChange,\n    placeholder: \"Enter your Passward\",\n    name: \"password\",\n    autoComplete: \"current-password\",\n    endAdornment: __jsx(InputAdornment, {\n      position: \"end\"\n    }, __jsx(IconButton, {\n      \"aria-label\": \"toggle password visibility\",\n      onClick: handleClickShowPassword\n    }, showPassword ? __jsx(Visibility, null) : __jsx(VisibilityOff, null)))\n  })), __jsx(Button, {\n    type: \"submit\",\n    className: style.productButton,\n    size: \"small\"\n  }, \"Submit\")))), __jsx(\"div\", {\n    className: style.typeLogin\n  }, __jsx(Typography, {\n    className: style.anchorLink,\n    component: \"h6\",\n    variant: \"h6\"\n  }, \"Signup With Me\"), __jsx(Link, {\n    href: \"/signup\"\n  }, __jsx(\"a\", null, \" Click Here \")))), __jsx(CardMedia, {\n    component: \"img\",\n    alt: \"Login\",\n    image: loginImage,\n    title: \"Login with me\",\n    className: style.cardImage\n  })))), __jsx(Snackbar, {\n    open: open,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    autoHideDuration: 60000,\n    onClose: handleClose\n  }, __jsx(Alert, {\n    onClose: handleClose,\n    show: ShowAlertError,\n    severity: authdata.error ? \"error\" : 'success'\n  })));\n}","map":null,"metadata":{},"sourceType":"module"}