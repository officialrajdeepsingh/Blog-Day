{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Fragment } from 'react';\nimport ReactMde from \"react-mde\";\nimport * as Showdown from \"showdown\";\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport Button from '@material-ui/core/Button';\nimport style from '../css/CommentEditor.module.scss';\nimport { request } from 'graphql-request';\nimport { COMMENT_MUTATION } from \"../graphalQurey\";\n\nconst signUP = input => {\n  return request('https://www.rajdeepsingh.dev/graphql', COMMENT_MUTATION, input);\n};\n\nfunction Alert(props) {\n  return __jsx(MuiAlert, _extends({\n    elevation: 6,\n    variant: \"filled\"\n  }, props), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: props.show\n    }\n  }));\n}\n\nexport default function CommentEditor(props) {\n  const [value, setValue] = React.useState();\n  const [selectedTab, setSelectedTab] = React.useState(\"write\");\n  const [open, setOpen] = React.useState(false);\n  const [comment, setComment] = React.useState({});\n  const [getDisplayName, setGetDisplayName] = React.useState({});\n  const [getUserId, setgetUserId] = React.useState({});\n  const converter = new Showdown.Converter({\n    tables: true,\n    simplifiedAutoLink: true,\n    strikethrough: true,\n    tasklists: true\n  });\n\n  const submitComment = async e => {\n    e.preventDefault();\n    const UserId = localStorage.getItem(\"userId\");\n    const DisplayName = localStorage.getItem(\"displayName\");\n    await signUP({\n      \"input\": {\n        \"content\": value,\n        \"author\": DisplayName,\n        \"userId\": UserId,\n        \"clientMutationId\": \"createComment\",\n        \"commentOn\": props.postid\n      }\n    }).then(data => {\n      setComment(() => {\n        return {\n          data\n        };\n      });\n    }).catch(error => setComment(() => {\n      return {\n        error\n      };\n    }));\n    setOpen(() => true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  console.log(comment, ' comment ');\n  const ShowAlertError = comment.error ? comment.error.response.errors[0].message : 'submit';\n  return __jsx(Fragment, {\n    key: props.keyId\n  }, __jsx(ReactMde, {\n    value: value,\n    onChange: setValue,\n    selectedTab: selectedTab,\n    onTabChange: setSelectedTab,\n    generateMarkdownPreview: markdown => Promise.resolve(converter.makeHtml(markdown)),\n    childProps: {\n      writeButton: {\n        tabIndex: -1\n      }\n    }\n  }), __jsx(\"form\", {\n    onSubmit: submitComment\n  }, __jsx(Button, {\n    type: \"submit\",\n    className: style.productButton,\n    size: \"small\"\n  }, \"Submit\")), __jsx(Snackbar, {\n    open: open,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    autoHideDuration: 6000,\n    onClose: handleClose\n  }, __jsx(Alert, {\n    onClose: handleClose,\n    show: ShowAlertError,\n    severity: comment.error ? \"error\" : 'success'\n  })));\n}","map":null,"metadata":{},"sourceType":"module"}